async function getScripts(){return new Promise(e=>{chrome.storage.local.get("scripts",t=>{e(t.scripts||[])})})}async function saveScript(e){e.id||(e.id=Date.now().toString(36)+Math.random().toString(36).substr(2,5)),e.addedAt=Date.now();let a=await getScripts(),t=a.findIndex(t=>t.metadata.name===e.metadata.name&&t.metadata.namespace===e.metadata.namespace);return 0<=t?a[t]=e:a.push(e),new Promise(t=>{chrome.storage.local.set({scripts:a},t)})}async function removeScript(e){let a=(await getScripts()).filter(t=>t.id!==e);return new Promise(t=>{chrome.storage.local.set({scripts:a},t)})}export{getScripts,saveScript,removeScript};